<!DOCTYPE HTML>
<html>
    <head>
        <title>exhistory test page</title>
        <script type='text/javascript' src='exhistory.js'></script>
        <script type='text/javascript'>
          window.onpopstate = function(event) {
            setState(event.state);
          };
          window.setElementText = function(id, text) {
	    var elem = document.getElementById(id);
            while(elem.childNodes.length >= 1) {
              elem.removeChild(elem.firstChild);
            }
            elem.appendChild(elem.ownerDocument.createTextNode(text));
          };
	  window.setState = function(state) {
            setElementText("state", state);
	  };
          window.pushState = function(state, title, url) {
            history.pushState(state, title, url);
            setState(state);
          };
        </script>
        <style>
          div#state {
            display: inline-block;
            width: 80px;
            height: 25px;
            padding: 10px;
            border: solid 1px black;
            color: red;
          }
        </style>
    </head>
    <body>
        <h1>exhistory test page</h1>
        <div id="state"></div>
        <p>
          <button onclick='pushState("state:foo", "foo", "foo");'>foo</button>
          <button onclick='pushState("state:bar", "bar", "bar");'>bar</button>
          <button onclick='pushState(null, "null", "null");'>null</button>
	</p>
    </body>
</html>
